!function(t){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&module.exports?module.exports=t():window.flipbook=t.call(this)}(function(){var t=function(t){var e,n,o,i,a,f,r,d,s,l,c,u,p,m,g,h=-1,v=function(){x(),w(),b(),y(function(){p=!0,C(),H(0),e.removeChild(a)})},x=function(){e=document.getElementById(t.id),e.classList.add("flip-container"),a=document.createElement("div"),a.innerText="Loading animation...",a.classList.add("flip-loader"),e.appendChild(a),n=document.createElement("div"),n.classList.add("flip-graphic"),e.appendChild(n),o=L(n),i=o.getContext("2d")},w=function(){I(e,{position:"relative",width:"100%",overflow:"hidden"}),I(a,{"text-align":"center",padding:"1em","font-family":"sans-serif",color:"#666",background:"#efefef"}),I(n,{position:"absolute",top:0,left:0}),I(o,{position:"absolute",top:0,left:0})},b=function(){window.addEventListener("resize",C,!1),window.addEventListener("scroll",E,!1)},y=function(e){m=[];for(var n=0;n<t.frames;n++)m[n]={src:t.path+"/"+(n+1)+"."+t.extension};var o=function(t){var n=m[t];k(n,function(i,a){n.img=a,t++,t<m.length?o(t):e()})};o(0)},L=function(t){var e=document.createElement("canvas");return e.classList.add("flip-canvas"),t.appendChild(e),e},C=function(){f=e.offsetWidth,r=Math.floor(f/t.aspectRatio);var i=innerHeight-r;s=r+i,o.width=f,o.height=r,o.style.top=Math.floor(i/2)+"px",n.style.height=s+"px",n.style.width=f+"px";var a=R();d=innerHeight*a,e.style.height=d+"px";var p=e.getBoundingClientRect();l=p.left,c=p.top+pageYOffset,u=p.bottom+pageYOffset-n.offsetHeight,O(),Y(pageYOffset-c,!0)},E=function(){M()},M=function(){g||requestAnimationFrame(O),g=!0},O=function(){if(g=!1,p){var t=pageYOffset-c,e=pageYOffset-u;t>0&&0>e?(I(n,{position:"fixed",top:0,left:l+"px",bottom:"auto"}),Y(t)):e>0?(I(n,{position:"absolute",top:"auto",left:0,bottom:0}),Y(d)):0>t&&(I(n,{position:"absolute",top:0,left:0,bottom:"auto"}),Y(0))}},Y=function(e,n){var o=e/(d-s);o=Math.min(Math.max(o,0),1);var i=Math.floor(o*(t.frames-1));(n||h!==i)&&(h=i,H(i))},H=function(t){i.clearRect(0,0,f,r),i.drawImage(m[t].img,0,0,f,r)},I=function(t,e){for(var n in e)t.style[n]=e[n]},R=function(){var e=10,n=2;return n+e*(1-t.speed)},k=function(t,e){var n=new Image;n.onload=function(){e(null,n)},n.onerror=function(){e("error loading image: "+t.src)},n.src=t.src};v()};return t});